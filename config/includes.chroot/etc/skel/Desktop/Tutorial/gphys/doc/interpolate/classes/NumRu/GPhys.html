<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: NumRu::GPhys</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">NumRu::GPhys</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/interpolate_rb.html">
                interpolate.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000005">interpolate</a>&nbsp;&nbsp;
      <a href="#M000002">mouse_cut</a>&nbsp;&nbsp;
      <a href="#M000003">mouse_cut_repeat</a>&nbsp;&nbsp;
      <a href="#M000004">regrid</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000005" class="method-detail">
        <a name="M000005"></a>

        <div class="method-heading">
          <a href="GPhys.src/M000005.html" target="Code" class="method-signature"
            onclick="popupCode('GPhys.src/M000005.html');return false;">
          <span class="method-name">interpolate</span><span class="method-args">(*coords)</span>
          </a>
        </div>
      
        <div class="method-description">
          <h1>Wide-purpose multi-dimensional linear interpolation</h1>
<p>
This method supports interpolation regarding combinations of 1D and 2D
coordinate variables. For instance, suppose self is 4D with coordinates
named [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;t&quot;] and
associated coordinates &quot;sigma&quot;[&quot;z&quot;] (&quot;sigma&quot;
is 1D and its axis is &quot;z&quot;),
&quot;p&quot;[&quot;x&quot;,&quot;y&quot;],
&quot;q&quot;[&quot;x&quot;,&quot;y&quot;] (&quot;p&quot; and &quot;q&quot;
are 2D having the coordinates &quot;x&quot; and &quot;y&quot;). You can
make interpolation by specifying 1D VArrays whose names are among
&quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;t&quot;,
&quot;sigma&quot;, &quot;p&quot;, &quot;q&quot;. You can also use a Hash
like {&quot;z&quot; =&gt; 1.0} to specify a single point along the
&quot;x&quot; coordinate.
</p>
<p>
If the units of the target coordinate and the current coordinate are
different, a converstion was made so that slicing is made correctly, as
long as the two units are comvertible; if the units are not convertible, it
is just warned.
</p>
<p>
If you specify only &quot;x&quot;, &quot;y&quot;, and &quot;t&quot;
coordinates for interpolation, the remaining coordinates &quot;z&quot; is
simply retained. So the result will be 4 dimensional with coordinates named
[&quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;t&quot;], but the
lengths of &quot;x&quot;, &quot;y&quot;, and &quot;t&quot; dimensions are
changed according to the specification. Note that the result could be
3-or-smaller dimensional &#8212; see below.
</p>
<p>
Suppose you have two 1D VArrays, xnew and ynew, having names &quot;x&quot;
and &quot;y&quot;, respectively, and the lengths of xnew and the ynew are
the same. Then, you can give an array of the two, [xnew, ynew], for coord0
as
</p>
<pre>
  gp_int = gp_org.interpolate( [xnew, ynew] )
</pre>
<p>
(Here, gp_org represents a <a href="GPhys.html">GPhys</a> object, and the
return value pointed by gp_int is also a <a href="GPhys.html">GPhys</a>.)
In this case, the 1st dimension of the result (gp_int) will be sampled at
the points [xnew[0],ynew[0]], [xnew[1],ynew[1]], [xnew[2],ynew[2]],
&#8230;, while the 2nd and the third dimensions are &quot;z&quot; and
&quot;t&quot; (no interpolation). This way, the rank of the result will be
reduced from that of self.
</p>
<p>
If you instead give xnew to coord0 and ynew to coord1 as
</p>
<pre>
  gp_int = gp_org.interpolate( xnew, ynew )
</pre>
<p>
The result will be 4-dimensional with the first coordinate sampled at
xnew[0], xnew[1], xnew[2],&#8230; and the second coordinate sampled at
ynew[0], ynew[1], ynew[2],&#8230;
</p>
<p>
You can also cut regarding 2D coordinate variable as
</p>
<pre>
  gp_int = gp_org.interpolate( pnew, qnew )
  gp_int = gp_org.interpolate( xnew, qnew )
  gp_int = gp_org.interpolate( [pnew, qnew] )
  gp_int = gp_org.interpolate( [xnew, qnew] )
</pre>
<p>
In any case, the desitination VArrays such as xnew ynew pnew qnew must be
one-dimensional.
</p>
<p>
Note that
</p>
<pre>
  gp_int = gp_org.interpolate( qnew )
</pre>
<p>
fails (exception raised), since it is ambiguous. If you tempted to do so,
perhaps what you want is covered by the following special form:
</p>
<p>
As a special form, you can specify a particular dimension like this:
</p>
<pre>
  gp_int = gp_org.interpolate( &quot;x&quot;=&gt;pnew )
</pre>
<p>
Here, interpolation along &quot;x&quot; is made, while other axes are
retained. This is useful if pnew corresponds to a multi-D coordinate
variable where there are two or more corresponding axes (otherwise, this
special form is not needed.)
</p>
<p>
See the test part at the end of this file for more examples.
</p>
<p>
LIMITATION
</p>
<p>
Currently associated coordinates expressed by 3D or greater dimensional
arrays are not supported.
</p>
<p>
Computational efficiency of pure two-dimensional coordinate support should
be improved by letting C extensions cover deeper and improving the search
algorithm for grid (which is usually ordered quasi-regularly).
</p>
<p>
COVERAGE
</p>
<p>
Extrapolation is covered for 1D coordinates, but only interpolation is
covered for 2D coordinates (which is limited by gt2dlib in DCL &#8212;
exception will be raised if you specify a grid point outside the original
2D grid points.).
</p>
<p>
MATHEMATICAL SPECIFICATION
</p>
<p>
The multi-dimensional linear interpolation is done by supposing a (hyper-)
&quot;rectangular&quot; grid, where each dimension is independently sampled
one-dimensionally. In case of interpolation along two dimensional
coordinates such as &quot;p&quot; and &quot;q&quot; in the example above, a
mapping from a rectangular grid is assumed, and the corresponding points in
the rectangular grid is solved inversely (currently by using gt2dlib in
DCL).
</p>
<p>
For 1D and 2D cases, linear interpolations may be expressed as
</p>
<pre>
   1D:  zi = (1-a)*z0 + a*z1
   2D:  zi = (1-a)*(1-b)*z00 + a*(1-b)*z10 + (1-a)*b*z01 + a*b*z11
</pre>
<p>
This method is extended to arbitrary number of dimensions. Thus, if the
number of dimensions to <a href="GPhys.html#M000005">interpolate</a> is S,
then 2**S grid points are used for each interpolation (8 points for 3D, 16
points for 4D,&#8230;). Thus, the linearity of this interpolation is only
along each dimension, not over the whole dimensionality.
</p>
<p>
USAGE
</p>
<pre>
  interpolate(coord0, coord1, ...)
</pre>
<p>
ARGUMENTS
</p>
<ul>
<li>coord0, coord1,&#8230; [ 1D <a href="VArray.html">VArray</a>, or Array of
1D <a href="VArray.html">VArray</a>, or a 1-element Hash as
{coordinate_name(String) =&gt; slice_loc_value(Numeric)} ] : locations to
which interpolation is made. Names of all the <a
href="VArray.html">VArray</a>&#8216;s in the arguments must exist among the
names of the coordinates of self (including associated coordinates), since
the dimension finding is made in terms of coordinate names. If an argument
is an Array of <a href="VArray.html">VArray</a>&#8216;s, the first <a
href="VArray.html">VArray</a> will become the main coordinate variable, and
the rest will be associated coordinates.

</li>
<li>[SPECIAL CASE] You can specfify a one-element Hash as the only argument
such as

<pre>
     gphys.interpolate(&quot;x&quot;=&gt;varray)
</pre>
<p>
where varray is a coordinate onto which interpolation is made. This is
espcially useful if varray is multi-D. If varray&#8216;s name &quot;p&quot;
(name of a 2D coordnate var), for example, you can <a
href="GPhys.html#M000005">interpolate</a> only regarding &quot;x&quot; by
retaining other axes. If varray is 1-diemnsional, the same thing can be
done simply by
</p>
<pre>
     gphys.interpolate(varray)
</pre>
<p>
since the corresponding 1D coordinate is found aotomatically.
</p>
</li>
</ul>
<p>
RETURN VALUE
</p>
<ul>
<li>a <a href="GPhys.html">GPhys</a>

</li>
</ul>
        </div>
      </div>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="GPhys.src/M000002.html" target="Code" class="method-signature"
            onclick="popupCode('GPhys.src/M000002.html');return false;">
          <span class="method-name">mouse_cut</span><span class="method-args">(dimx, dimy, num=2)</span>
          </a>
        </div>
      
        <div class="method-description">
          <h1>Makes a subset interactively by specifying a (poly-)line on the DCL viewport</h1>
<p>
ARGUMENTS
</p>
<ul>
<li>dimx {String] : name of number (0,1,..) of the dimension corresponding to
the X coordinate in the current window of DCL

</li>
<li>dimy {String] : name of number (0,1,..) of the dimension corresponding to
the Y coordinate in the current window of DCL

</li>
<li>num {Integer] : the number of points along the (poly-)line (2 or greater
&#8212; if 2, a single line segment; if 3 or more, a poly-line)

</li>
</ul>
<p>
RETURN VALUE
</p>
<ul>
<li>a <a href="GPhys.html">GPhys</a>

</li>
</ul>
        </div>
      </div>

      <div id="method-M000003" class="method-detail">
        <a name="M000003"></a>

        <div class="method-heading">
          <a href="GPhys.src/M000003.html" target="Code" class="method-signature"
            onclick="popupCode('GPhys.src/M000003.html');return false;">
          <span class="method-name">mouse_cut_repeat</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <h1>Interpolation onto grid points specified by the previous call of <a href="GPhys.html#M000002">GPhys#mouse_cut</a></h1>
        </div>
      </div>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="GPhys.src/M000004.html" target="Code" class="method-signature"
            onclick="popupCode('GPhys.src/M000004.html');return false;">
          <span class="method-name">regrid</span><span class="method-args">(to)</span>
          </a>
        </div>
      
        <div class="method-description">
          <h1>Interpolate to conform the grid to a target <a href="GPhys.html">GPhys</a> object</h1>
<p>
ARGUMENTS
</p>
<ul>
<li>to [<a href="GPhys.html">GPhys</a>] : the target gphys

</li>
</ul>
<p>
RETURN VALUE
</p>
<ul>
<li>a <a href="GPhys.html">GPhys</a>

</li>
</ul>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>