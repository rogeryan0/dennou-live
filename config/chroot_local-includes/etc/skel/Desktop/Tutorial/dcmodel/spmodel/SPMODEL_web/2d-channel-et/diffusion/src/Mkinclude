# É½Âê  dcnote Makefile ÍÑ include ¥Õ¥¡¥¤¥ë¥Æ¥ó¥×¥ì¡¼¥È(¸¶»Ï»ñ¸»¤¬ tex) -*-makefile-*-
# Copyright (C) GFD_Dennou_Club, 2000.  All rights reserved.
#
# ÍúÎò  1999/07/20  ¾®¹âÀµ»Ì, ÎÓ¾Í²ð, 
#       1999/11/20  ÃÝ¹­¿¿°ì
#       2000/02/08  ¾®¹âÀµ»Ì
#       2000/03/08  ÃÝ¹­¿¿°ì
#       2000/05/17  ÃÝ¹­¿¿°ì  latex2html ÂÐ±þ
#       2002/11/26  ¾®¹âÀµ»Ì  dvipdfm ÂÐ±þ
#
PLATEX= platex
### PLATEX= ajlatex
DVIPS = dvips -f 
### DVIPS = dvi2ps 
PS2PDF= ps2pdf
#DVI2PDF= dvipdfm
DVI2PDF= dvipdfmx
MKDIR = mkdir
RM    = rm -f
LATEX2HTML = latex2html
LATEX2HTMLOPTIONS = -no_footnode -local_icons -short_extn \
		-bottom_navigation -contents_in_navigation -no_auto_link \
		-prev_url $(PTOPDIR)/SIGEN.htm -prev_title $(PTOPDIRNAME) \
		-up_url $(TOPDIR)/index.htm -up_title $(TOPDIRNAME) \
		-dir $(TARGETDIR) 
#
# dcnote command 
#
ICONDIR = /usr/lib/dcnote

DCNOTE-PS2GIF= dcnote-ps2gif
DCNOTE-HTMS  = dcnote-htms -s $(ICONDIR)
DCNOTE-LATEX2DESC= dcnote-latex2desc
DCNOTE-MKINDEX= dcnote-mkindex

#
# rules and dependencies 
#

all: installdir pdf desc htm index 

installdir:
	if [ ! -d $(TARGETDIR) ] ; then \
	$(MKDIR) $(TARGETDIR) ; \
	fi ;\

$(TARGET).dvi: $(TARGET).tex
	$(PLATEX) $(TARGET).tex
	$(PLATEX) $(TARGET).tex

$(TARGET).ps: $(TARGET).dvi
	$(DVIPS) $(TARGET).dvi > $(TARGET).ps

pdf: $(TARGETDIR)/$(TARGET).pdf

$(TARGETDIR)/$(TARGET).pdf: $(TARGET).dvi
	$(DVI2PDF) $(TARGET).dvi 
	mv $(TARGET).pdf $(TARGETDIR)/

gif: $(TARGET).ps
	$(DCNOTE-PS2GIF) -d $(TARGETDIR) $(TARGET).ps

htm: gif
	$(DCNOTE-HTMS) $(TARGETDIR)

desc: $(TARGET).dvi
	$(DCNOTE-LATEX2DESC) $(TARGET).tex

index: 
	$(DCNOTE-MKINDEX) -topdir $(TOPDIR) -tdirname $(TOPDIRNAME) \
	-prjdir $(PTOPDIR) -pdirname $(PTOPDIRNAME) \
	-wrkdir $(WORKDIR) $(TARGETDIR)

latex2html: $(TARGET).dvi
	$(LATEX2HTML) $(LATEX2HTMLOPTIONS) $(TARGET).tex

clean: 
	$(RM) *~ *.bak *.aux *.log *.toc $(TARGET).ps $(TARGET).dvi 

