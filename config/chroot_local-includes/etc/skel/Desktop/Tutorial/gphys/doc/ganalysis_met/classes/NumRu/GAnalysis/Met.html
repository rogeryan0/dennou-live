<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: NumRu::GAnalysis::Met</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">NumRu::GAnalysis::Met</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/met_rb.html">
                met.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Meteorological analysis
</p>
<p>
USEFUL METHODS
</p>
<ul>
<li><a href="Met.html#M000003">temp2theta</a>

</li>
<li><a href="Met.html#M000006">pv_on_theta</a>

</li>
<li><a href="Met.html#M000005">interpolate_onto_theta</a>

</li>
</ul>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000011">convert_units2Pa</a>&nbsp;&nbsp;
      <a href="#M000012">df_dx_vialogscale</a>&nbsp;&nbsp;
      <a href="#M000009">find_prs_d</a>&nbsp;&nbsp;
      <a href="#M000008">frontogenesis_func</a>&nbsp;&nbsp;
      <a href="#M000002">g</a>&nbsp;&nbsp;
      <a href="#M000010">get_prs</a>&nbsp;&nbsp;
      <a href="#M000005">interpolate_onto_theta</a>&nbsp;&nbsp;
      <a href="#M000006">pv_on_theta</a>&nbsp;&nbsp;
      <a href="#M000001">set_g</a>&nbsp;&nbsp;
      <a href="#M000004">sigma_inv</a>&nbsp;&nbsp;
      <a href="#M000003">temp2theta</a>&nbsp;&nbsp;
      <a href="#M000007">z2geostrophic_wind</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">R</td>
          <td>=</td>
          <td class="context-item-value">UNumeric[287.04,&quot;J.kg-1.K-1&quot;]</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
&lt; Themodynamic constants for the Earth&#8216;s atmosphere &gt;

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">Rv</td>
          <td>=</td>
          <td class="context-item-value">UNumeric[461.50,&quot;J.kg-1.K-1&quot;]</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">Cp</td>
          <td>=</td>
          <td class="context-item-value">UNumeric[1004.6,&quot;J.kg-1.K-1&quot;]</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">Cpv</td>
          <td>=</td>
          <td class="context-item-value">UNumeric[1870.0,&quot;J.kg-1.K-1&quot;]</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">Kappa</td>
          <td>=</td>
          <td class="context-item-value">(R/Cp).to_f  # = 2.0/7.0</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">T0</td>
          <td>=</td>
          <td class="context-item-value">UNumeric[273.15,&quot;K&quot;]</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">Lat0</td>
          <td>=</td>
          <td class="context-item-value">UNumeric[2.500780e6,&quot;J.kg-1&quot;]</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">P00</td>
          <td>=</td>
          <td class="context-item-value">UNumeric[1e5,&quot;Pa&quot;]</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="Met.src/M000011.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000011.html');return false;">
          <span class="method-name">convert_units2Pa</span><span class="method-args">(prs)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Convert units into Pa. To deal with old versions of NumRu::Units that do
not support &quot;millibar&quot;.
</p>
<p>
ARGUMENT
</p>
<ul>
<li>prs [GPhys and UNumeric]

</li>
</ul>
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="Met.src/M000012.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000012.html');return false;">
          <span class="method-name">df_dx_vialogscale</span><span class="method-args">(f, x, dim)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000009" class="method-detail">
        <a name="M000009"></a>

        <div class="method-heading">
          <a href="Met.src/M000009.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000009.html');return false;">
          <span class="method-name">find_prs_d</span><span class="method-args">(gphys, error=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Find a pressure coordinate in a GPhys object
</p>
<p>
ARGUMENT
</p>
<ul>
<li>gphys [GPhys]

</li>
<li>error [nil/false or true] change the behavior if a pressure coordinate is
not found. Default: returns nil; if error is true, an exception is raised.

</li>
</ul>
<p>
RETURN VALUE
</p>
<ul>
<li>Integer to indicate the dimension of the pressure coordinate, or nil if not
found by default (see above)

</li>
</ul>
        </div>
      </div>

      <div id="method-M000008" class="method-detail">
        <a name="M000008"></a>

        <div class="method-heading">
          <a href="Met.src/M000008.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000008.html');return false;">
          <span class="method-name">frontogenesis_func</span><span class="method-args">(theta, u, v, w=nil, fstodr=true, full_adv = true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Adiabatic frontogenesis function over the sphere. &#8212; D/Dt(|gradH
theta|) or D/Dt(|gradH theta|^2), where gradH express the horizontal
component of gradient.
</p>
<p>
if full_adv is true (default),
</p>
<pre>
 D/Dt(|gradH theta|) =
   [ -(ux-va)*thetax^2 - (vx+uy)*thetax*thetay - vy*thetay^2
     - (wx*thetax + wy*thetay)*theta_z ]
   / |gradH theta|
</pre>
<p>
or else,
</p>
<pre>
 (\del/\del t + u gradx + v grady )(|gradH theta|) =
   [ -(ux-va)*thetax^2 - (vx+uy)*thetax*thetay - vy*thetay^2
     - (w*theta_z)_x*thetax - (w*theta_z)_y*thetay ]
   / |gradH theta|
</pre>
<p>
Here, the 2nd line (vertical advection) is optional;
</p>
<dl>
<dt>vx, vy</dt><dd>= gradH v; [thetax, thetay] = gradH theta;

</dd>
<dt>ux, uy</dt><dd>= cos_phi * gradH (u/cos_phi)

</dd>
</dl>
<p>
va = v/tan_phi/a (a=radius). z and w is the vertical coordinate and the
lagrangian &quot;velocity&quot; in that coordinate &#8212; Typically they
are p and omega, or log-p height and log-p w.
</p>
<p>
This formulation is adiabatic; the diabatic heating effect can be easily
included if needed.
</p>
<p>
ARGUMENTS
</p>
<ul>
<li>theta [GPhys] : potential temperature

</li>
<li>u [GPhys] : zonal wind

</li>
<li>v [GPhys] : meridional wind

</li>
<li>w [nil (default) or GPhys] : (optional) &quot;vertical wind&quot;, which
must be dimensionally consistent with the vertical coordiante (e.g., omega
for the pressure coordinate). If w is given, the vertical cooridnate is
assumed to be the 3rd one (dim=2).

</li>
<li>fstodr [true (default) or false] (optional) if true D/Dt(|\NablaH theta|)
returned; if false D/Dt(|\NablaH theta|^2) is returned.

</li>
<li>full_adv [true (default) or false] : whether to calculate full lagrangian
tendency or lagragian tendency only in horizontal direction

</li>
</ul>
<p>
RETURN VALUE
</p>
<ul>
<li>frontogenesis function [GPhys]

</li>
</ul>
        </div>
      </div>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="Met.src/M000002.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000002.html');return false;">
          <span class="method-name">g</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns gravity acceleration in the module (default: 9.8 ms-1).
</p>
        </div>
      </div>

      <div id="method-M000010" class="method-detail">
        <a name="M000010"></a>

        <div class="method-heading">
          <a href="Met.src/M000010.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000010.html');return false;">
          <span class="method-name">get_prs</span><span class="method-args">(gphys)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Find and return a pressure coordinate in a GPhys object
</p>
<p>
ARGUMENT
</p>
<ul>
<li>gphys [GPhys]

</li>
</ul>
<p>
RETURN VALUE
</p>
<ul>
<li>pressure in a 1D GPhys object created from the pressure axis in the GPhys
object or a UNumeric object if the pressure coordinated has been deleted by
subsetting.

</li>
</ul>
        </div>
      </div>

      <div id="method-M000005" class="method-detail">
        <a name="M000005"></a>

        <div class="method-heading">
          <a href="Met.src/M000005.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000005.html');return false;">
          <span class="method-name">interpolate_onto_theta</span><span class="method-args">(gphys, theta, theta_levs)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Interpolate onto the potential temperature coordinate
</p>
<p>
ARGUMENTS
</p>
<ul>
<li>gphys [GPhys] a gphys object that have a pressure dimension

</li>
<li>theta [GPhys] potential temperature defined on the same grid as gphys

</li>
<li>theta_vals : 1D NArray or Array

</li>
</ul>
        </div>
      </div>

      <div id="method-M000006" class="method-detail">
        <a name="M000006"></a>

        <div class="method-heading">
          <a href="Met.src/M000006.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000006.html');return false;">
          <span class="method-name">pv_on_theta</span><span class="method-args">(u, v, theta, theta_levs)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Derive Ertel&#8216;s potential vorticity on the theta (isentropic)
coordinate
</p>
<p>
ARGUMENTS
</p>
<ul>
<li>u [GPhys] : zonal wind on pressure coordinate (u, v, and theta must share
same coordinates)

</li>
<li>v [GPhys] : meridional wind on pressure coordinate

</li>
<li>theta [GPhys] : potential temperature on pressure coordinate

</li>
<li>theta_levs [NArray or Array] : one dimensional array of potential
temperature values (Kelvin) on which PV is derived.

</li>
</ul>
<p>
RETURN VALUE
</p>
<ul>
<li>potential temperature [GPhys] on a theta coordinate, where levels are set
to theta_levs

</li>
</ul>
        </div>
      </div>

      <div id="method-M000001" class="method-detail">
        <a name="M000001"></a>

        <div class="method-heading">
          <a href="Met.src/M000001.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000001.html');return false;">
          <span class="method-name">set_g</span><span class="method-args">(g)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets gravity acceleration in the module (default: 9.8 ms-1).
</p>
<p>
ARGUMENT
</p>
<ul>
<li><a href="Met.html#M000002">g</a> [UNumeric]

</li>
</ul>
<p>
EXAMPLE
</p>
<pre>
  Met::set_g( UNumeric[9.7,&quot;m.s-2&quot;] )
</pre>
<p>
RETURN VALUE
</p>
<ul>
<li>The argument <a href="Met.html#M000002">g</a>

</li>
</ul>
        </div>
      </div>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="Met.src/M000004.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000004.html');return false;">
          <span class="method-name">sigma_inv</span><span class="method-args">(theta, dim=nil, prs=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Inverse of the &quot;sigma&quot; density in the theta coordinate:
</p>
<p>
ARGUMENTS
</p>
<ul>
<li>theta [GPhys or VArray] potential temperature

</li>
<li>dim [Integer] : the pressure dimension. If theta is a GPhys, this argument
can be omitted, in which case a pressure dimension is searched internally
by <a href="Met.html#M000009">find_prs_d</a>.

</li>
<li>prs [GPhys or VArray] : the pressure values. Internally searched if
omitted.

</li>
</ul>
<p>
RETURN VALUE
</p>
<ul>
<li>1 / sigma = -<a href="Met.html#M000002">g</a> d\theta/dp [GPhys]

</li>
</ul>
        </div>
      </div>

      <div id="method-M000003" class="method-detail">
        <a name="M000003"></a>

        <div class="method-heading">
          <a href="Met.src/M000003.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000003.html');return false;">
          <span class="method-name">temp2theta</span><span class="method-args">(temp, prs=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Convert temperature into potential temperature
</p>
<p>
ARGUMENTS
</p>
<ul>
<li>temp [UNumeric or GPhys or VArray, which supports method &quot;units&quot;]
: temperature

</li>
<li>prs [UNumeric or GPhys or VArray, which supports method &quot;units&quot;]
: pressure

</li>
</ul>
<p>
RETURN VALUE
</p>
<ul>
<li>potential temperature [UNumeric or GPhys or VArray,&#8230;] in Kelvin

</li>
</ul>
        </div>
      </div>

      <div id="method-M000007" class="method-detail">
        <a name="M000007"></a>

        <div class="method-heading">
          <a href="Met.src/M000007.html" target="Code" class="method-signature"
            onclick="popupCode('Met.src/M000007.html');return false;">
          <span class="method-name">z2geostrophic_wind</span><span class="method-args">(z, f=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Derive geostrophic wind from geopotential hight (spherical but fixed f)
</p>
<p>
ARGUMENTS
</p>
<ul>
<li>z [GPhys] : geopotential height on the pressure (or log-pressure)
coordinate

</li>
<li>f [nil or Numeric of UNumeric] : the constant f value (Coriolis parameter).
If nil, the value at the north pole is assumed. If Numeric, units are
assumed to be &quot;s-1&quot;.

</li>
</ul>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>