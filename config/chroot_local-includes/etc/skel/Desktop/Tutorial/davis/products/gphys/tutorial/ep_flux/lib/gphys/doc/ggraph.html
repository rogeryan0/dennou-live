<?xml version="1.0" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>../lib/numru/ggraph.rb</title>
</head>
<body>
<h1><a name="label:0" id="label:0">module NumRu::GGraph and others in ggraph.rb</a></h1><!-- RDLabel: "module NumRu::GGraph and others in ggraph.rb" -->
<h2><a name="label:1" id="label:1">Index</a></h2><!-- RDLabel: "Index" -->
<ul>
<li><a href="#label:2">class NumRu::GPhys (methods added)</a>
<ul>
<li><a href="#label:4">first1D</a>
    Returns a 1D subset selecting the first elements of 2nd, 3rd, ..
    dimensions, i.e., self[true, 0, 0, ...].</li>
<li><a href="#label:5">first2D</a>
    Returns a 2D subset selecting the first elements of 3rd, 4th, ..
    dimensions, i.e., self[true, true, 0, 0, ...].</li>
</ul></li>
<li><a href="#label:6">module NumRu::GGraph</a>
<ul>
<li><a href="#label:8">title</a>
    Shows title by <code>DCL.uxmttl('t',string,0.0)</code>.
    Graphic methods such as <a href="#label:18">contour</a> calls this by default.</li>
<li><a href="#label:9">annotate</a>
    Show texts on the right margin of the viewport.
    Graphic methods such as <a href="#label:18">contour</a> calls this by default.</li>
<li><a href="#label:10">fig</a>
    Define a figure by setting viewport, window, and coordinate transform 
    id (itr) from two 1D VArrays <code>xax</code> and <code>yax</code>. </li>
<li><a href="#label:11">set_fig</a>
    Change the default option values for <a href="#label:10">fig</a>.</li>
<li><a href="#label:12">next_fig</a>
    Set the option values effective only in the next call of <a href="#label:10">fig</a>
    (cleared then).</li>
<li><a href="#label:13">axes</a>
    Draw axes using (by default) info in <code>xax</code> and <code>yax</code> if non-nil.</li>
<li><a href="#label:14">set_axes</a>
    Change the default option values for <a href="#label:13">axes</a>.</li>
<li><a href="#label:15">next_axes</a>
    Set the option values effective only in the next call of <a href="#label:13">axes</a>
    (cleared then).</li>
<li><a href="#label:16">line</a>
    Plot a poly-line by selecting the first dimension (with <a href="#label:4">first1D</a>)
    if <code>gphys</code> is more than 2D.</li>
<li><a href="#label:17">mark</a>
    Similar to <a href="#label:16">line</a> but plots marks instead of drawing a poly-line.</li>
<li><a href="#label:18">contour</a>
    Contour plot by selecting the first 2 dimensions (with <a href="#label:5">first2D</a>)
    if <code>gphys</code> is more than 3D.</li>
<li><a href="#label:19">set_contour_levels</a>
    Set contour levels for <a href="#label:18">contour</a> explicitly by values with the option <code>levels</code>.</li>
<li><a href="#label:20">clear_contour_levels</a>
    Clear contour levels set by <a href="#label:19">set_contour_levels</a>.</li>
<li><a href="#label:21">set_linear_contour_options</a>
    Change the default option values regarding linear contour level
    setting in <a href="#label:18">contour</a>.</li>
<li><a href="#label:22">next_linear_contour_options</a>
    Similar to <a href="#label:21">set_linear_contour_options</a> but the setting
    is effective only for the next call of <a href="#label:18">contour</a>.</li>
<li><a href="#label:23">tone</a>
    Color tone or shading by selecting the first 2 dimensions 
    (with <a href="#label:5">first2D</a>) if <code>gphys</code> is more than 3D.</li>
<li><a href="#label:24">set_tone_levels</a>
    Set tone levels for <a href="#label:23">tone</a> explicitly by values.</li>
<li><a href="#label:25">clear_tone_levels</a>
    Clear tone levels set by <a href="#label:24">set_tone_levels</a>.</li>
<li><a href="#label:26">set_linear_tone_options</a>
    Change the default option values regarding linear tone level
    setting in <a href="#label:23">tone</a>.</li>
<li><a href="#label:27">next_linear_tone_options</a>
    Similar to <a href="#label:26">set_linear_tone_options</a> but the setting
    is effective only for the next call of <a href="#label:23">tone</a>.</li>
</ul></li>
<li><a href="#label:28">module NumRu::DCLExt</a>
<ul>
<li><a href="#label:32">gl_set_params</a>
    Calls <code>DCL.glpset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:34">sg_set_params</a>
    Calls <code>DCL.sgpset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:36">sl_set_params</a>
    Calls <code>DCL.slpset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:38">sw_set_params</a>
    Calls <code>DCL.swpset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:40">uz_set_params</a>
    Calls <code>DCL.uzpset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:42">ul_set_params</a>
    Calls <code>DCL.ulpset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:44">uc_set_params</a>
    Calls <code>DCL.ucpset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:46">uu_set_params</a>
    Calls <code>DCL.uupset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:48">us_set_params</a>
    Calls <code>DCL.uspset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:50">ud_set_params</a>
    Calls <code>DCL.udpset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:51">ud_set_linear_levs</a>
    Set contour levels with a constant interval</li>
<li><a href="#label:52">ud_set_contour</a>
    Set contours of at specified levels.</li>
<li><a href="#label:53">ud_add_contour</a>
    Same as <a href="#label:52">ud_set_contour</a>, but does not clear the contour levels that have
    been set.</li>
<li><a href="#label:55">ue_set_params</a>
    Calls <code>DCL.uepset</code> multiple times (for each key and val of <code>hash</code>).</li>
<li><a href="#label:56">ue_set_linear_levs</a>
    Set tone levels with a constant interval</li>
<li><a href="#label:57">ue_set_tone</a>
    Set tone levels and patterns.</li>
<li><a href="#label:58">ue_add_tone</a>
    Same as <a href="#label:57">ue_set_tone</a>, but does not clear the tone levels that have
    been set.</li>
<li><a href="#label:60">ug_set_params</a>
    Calls <code>DCL.ugpset</code> multiple times (for each key and val of <code>hash</code>).
    See <a href="#label:32">gl_set_params</a> for usage.</li>
<li><a href="#label:62">um_set_params</a>
    Calls <code>DCL.umpset</code> multiple times (for each key and val of <code>hash</code>).</li>
</ul></li>
</ul>
<h1><a name="label:2" id="label:2">class NumRu::GPhys (methods added)</a></h1><!-- RDLabel: "class NumRu::GPhys (methods added)" -->
<p>The following methods are added to GPhys.</p>
<h2><a name="label:3" id="label:3">Instance Methods</a></h2><!-- RDLabel: "Instance Methods" -->
<dl>
<dt><h4><a name="label:4" id="label:4"><code>first1D</code></a></h4></dt><!-- RDLabel: "first1D" -->
<dd>
<p>Returns a 1D subset selecting the first elements of 2nd, 3rd, ..
dimensions, i.e., self[true, 0, 0, ...].</p>
<p>ARGUMENTS</p>
<ul>
<li>(none)</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>a GPhys</li>
</ul></dd>
<dt><h4><a name="label:5" id="label:5"><code>first2D</code></a></h4></dt><!-- RDLabel: "first2D" -->
<dd>
<p>Returns a 2D subset selecting the first elements of 3rd, 4th, ..
dimensions, i.e., self[true, true, 0, 0, ...].</p>
<p>ARGUMENTS</p>
<ul>
<li>(none)</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>a GPhys</li>
</ul></dd>
</dl>
<h1><a name="label:6" id="label:6">module NumRu::GGraph</a></h1><!-- RDLabel: "module NumRu::GGraph" -->
<p>A graphic library for GPhys using RubyDCL.</p>
<p>This module uses GPhys but is not a part of it.
More specifically, even though this module is included in
the GPhys distribution, the class NumRu::GPhys knows nothing about it,
and GGraph accesses GPhys only though public methods.
So GGraph is not an insider, and you can make another graphic 
library if you like.</p>
<h2><a name="label:7" id="label:7">Module Functions</a></h2><!-- RDLabel: "Module Functions" -->
<dl>
<dt><h4><a name="label:8" id="label:8"><code>title(<var>string</var>)</code></a></h4></dt><!-- RDLabel: "title" -->
<dd>
<p>Shows title by <code>DCL.uxmttl('t',string,0.0)</code>.
Graphic methods such as <a href="#label:18">contour</a> calls this by default.</p>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul></dd>
<dt><h4><a name="label:9" id="label:9"><code>annotate(<var>str_ary</var>)</code></a></h4></dt><!-- RDLabel: "annotate" -->
<dd>
<p>Show texts on the right margin of the viewport.
Graphic methods such as <a href="#label:18">contour</a> calls this by default.</p>
<p>ARGUMENTS</p>
<ul>
<li>str_ary (Array of String) : </li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul></dd>
<dt><h4><a name="label:10" id="label:10"><code>fig(<var>xax</var>, <var>yax</var>, <var>options</var>=<var>nil</var>)</code></a></h4></dt><!-- RDLabel: "fig" -->
<dd>
<p>Define a figure by setting viewport, window, and coordinate transform 
id (itr) from two 1D VArrays <code>xax</code> and <code>yax</code>. </p>
<p><code>DCL.grfrm</code> or <code>DCL.grfig</code> is called depending options provided.</p>
<p>ARGUMENTS</p>
<ul>
<li>xax (VArray): a VArray representing the x (horizontal) coordinate
      of the figure.
      The x range of the window (UXMIN &amp; UYMAX in DCL) are determined
      with the max and min of <code>xax.val</code>. By default, 
      the min and max values are assigned to the left and right
      boundaries, respectively, but it is reversed if <code>xax</code> has
      a 'positive' attribute and its value is 'down' etc (see <code>options</code>).</li>
<li>yax (VArray): similar to <code>xax</code> but for the y (vertical) coordinate
      of the figure.</li>
<li><p>options (Hash) : options to change the default behavior if specified.
      It is a Hash with option names (String) as keys and their values.
      Options are interpreted by a NumRu::Misc::KeywordOptAutoHelp,
      so you can shorten the keys (by omitting tails) as long as it is 
      unambiguous.</p>
<pre>option name   default value   # description:
"new_frame"   true    # whether to define a new frame by DCL.grfrm
                      # (otherwise, DCL.grfig is called)
"window"      nil     # [uxmin, uxmax, uymin, uymax]
"viewport"    [0.2, 0.8, 0.2, 0.8]    # [vxmin, vxmax, vymin, vymax]
"itr"         1       # coordinate transformation number
"xreverse"    "positive:down,units:hPa"       # Assign max value to
                      # UXMIN and min value to UXMAX if condition is
                      # satisfied (nil:never, true:always, String: when
                      # an attribute has the value specified
                      # ("key:value,key:value,..")
"yreverse"    "positive:down,units:hPa"       # Assign max value to
                      # UYMIN and min value to UYMAX if condition is
                      # satisfied (nil:never, true:always, String: when
                      # an attribute has the value specified
                      # ("key:value,key:value,..")
"help"        false   # show help message if true</pre></li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul>
<p>POSSIBLE EXCEPTIONS</p>
<ul>
<li>those from NumRu::DCL if any / TypeError if any</li>
<li>options has a key that does not match any of the option names.</li>
<li>options has a key that is ambiguous</li>
</ul></dd>
<dt><h4><a name="label:11" id="label:11"><code>set_fig(<var>options</var>)</code></a></h4></dt><!-- RDLabel: "set_fig" -->
<dd>
<p>Change the default option values for <a href="#label:10">fig</a>.</p>
<p>ARGUMENTS</p>
<ul>
<li>options (Hash) : The usage is the same as <code>options</code> for <a href="#label:10">fig</a>.</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>a Hash containing the values replaced (the ones before calling this
      method)</li>
</ul>
<p>POSSIBLE EXCEPTIONS</p>
<ul>
<li>see <a href="#label:10">fig</a>.</li>
</ul></dd>
<dt><h4><a name="label:12" id="label:12"><code>next_fig(<var>options</var>)</code></a></h4></dt><!-- RDLabel: "next_fig" -->
<dd>
<p>Set the option values effective only in the next call of <a href="#label:10">fig</a>
(cleared then).</p>
<p>These value are overwritten if specified explicitly in the next
call of <a href="#label:10">fig</a>.</p>
<p>ARGUMENTS</p>
<ul>
<li>options (Hash) : The usage is the same as <code>options</code> for <a href="#label:10">fig</a>.</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul>
<p>POSSIBLE EXCEPTIONS</p>
<ul>
<li>see <a href="#label:10">fig</a>.</li>
</ul></dd>
<dt><h4><a name="label:13" id="label:13"><code>axes(<var>xax</var>=<var>nil</var>, <var>yax</var>=<var>nil</var>, <var>options</var>=<var>nil</var>)</code></a></h4></dt><!-- RDLabel: "axes" -->
<dd>
<p>Draw axes using (by default) info in <code>xax</code> and <code>yax</code> if non-nil.</p>
<p>ARGUMENTS</p>
<ul>
<li>xax (nil or VArray): if non-nil, attributes 'long_name' and 'units' 
      are read to define <code>xtitle</code> and <code>xunits</code> (see below).
      These are overwritten by explicitly specifying <code>xtitle</code> and 
      <code>xunits</code>.</li>
<li>yax (nil or VArray): if non-nil, attributes 'long_name' and 'units' 
      are read to define <code>ytitle</code> and <code>yunits</code> (see below).
      These are overwritten by explicitly specifying <code>ytitle</code> and 
      <code>yunits</code>.</li>
<li><p>options (Hash) : options to change the default behavior if specified.
      It is a Hash with option names (String) as keys and their values.
      Options are interpreted by a NumRu::Misc::KeywordOptAutoHelp,
      so you can shorten the keys (by omitting tails) as long as it is 
      unambiguous.</p>
<pre>option name   default value   # description:
"xside"       "tb"    # Where to draw xaxes (combination of t, b and u)
"yside"       "lr"    # Where to draw yaxes (combination of l, r and u)
"xtitle"      nil     # Title of x axis (if nil, internally determined)
"ytitle"      nil     # Title of y axis (if nil, internally determined)
"xunits"      nil     # Units of x axis (if nil, internally determined)
"yunits"      nil     # Units of y axis (if nil, internally determined)
"help"        false   # show help message if true</pre></li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul>
<p>POSSIBLE EXCEPTIONS</p>
<ul>
<li>those from NumRu::DCL if any / TypeError if any</li>
<li>options has a key that does not match any of the option names.</li>
<li>options has a key that is ambiguous</li>
</ul></dd>
<dt><h4><a name="label:14" id="label:14"><code>set_axes(<var>options</var>)</code></a></h4></dt><!-- RDLabel: "set_axes" -->
<dd>
<p>Change the default option values for <a href="#label:13">axes</a>.</p>
<p>ARGUMENTS</p>
<ul>
<li>options (Hash) : The usage is the same as <code>options</code> for <a href="#label:13">axes</a>.</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>a Hash containing the values replaced (the ones before calling this
      method)</li>
</ul>
<p>POSSIBLE EXCEPTIONS</p>
<ul>
<li>see <a href="#label:13">axes</a>.</li>
</ul></dd>
<dt><h4><a name="label:15" id="label:15"><code>next_axes(<var>options</var>)</code></a></h4></dt><!-- RDLabel: "next_axes" -->
<dd>
<p>Set the option values effective only in the next call of <a href="#label:13">axes</a>
(cleared then).</p>
<p>These value are overwritten if specified explicitly in the next
call of <a href="#label:13">axes</a>.</p>
<p>ARGUMENTS</p>
<ul>
<li>options (Hash) : The usage is the same as <code>options</code> for <a href="#label:13">axes</a>.</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul>
<p>POSSIBLE EXCEPTIONS</p>
<ul>
<li>see <a href="#label:13">axes</a>.</li>
</ul></dd>
<dt><h4><a name="label:16" id="label:16"><code>line(<var>gphys</var>, <var>newframe</var>=<var>true</var>, <var>options</var>=<var>nil</var>)</code></a></h4></dt><!-- RDLabel: "line" -->
<dd>
<p>Plot a poly-line by selecting the first dimension (with <a href="#label:4">first1D</a>)
if <code>gphys</code> is more than 2D.</p>
<p>ARGUMENTS</p>
<ul>
<li>gphys (GPhys) : a GPhys whose data is plotted.</li>
<li>newframe (true/false) : if true, calls <a href="#label:10">fig</a>, <a href="#label:13">axes</a>,
      <a href="#label:8">title</a>, and <a href="#label:9">annotate</a> internally; if false, only
      the poly-line is drawn (overlaid to the exiting figure).</li>
<li><p>options (Hash) : options to change the default behavior if specified.
      It is a Hash with option names (String) as keys and their values.
      Options are interpreted by a NumRu::Misc::KeywordOptAutoHelp,
      so you can shorten the keys (by omitting tails) as long as it is 
      unambiguous.</p>
<pre>option name   default value   # description:
"title"       nil     # Title of the figure(if nil, internally
                      # determined)
"annotate"    true    # if false, do not put texts on the right
                      # margin even when newframe==true
"exchange"    false   # whether to exchange x and y axes
"index"       1       # line/mark index
"type"        1       # line type
"help"        false   # show help message if true</pre></li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul></dd>
<dt><h4><a name="label:17" id="label:17"><code>mark(<var>gphys</var>, <var>newframe</var>=<var>true</var>, <var>options</var>=<var>nil</var>)</code></a></h4></dt><!-- RDLabel: "mark" -->
<dd>
<p>Similar to <a href="#label:16">line</a> but plots marks instead of drawing a poly-line.</p>
<p>ARGUMENTS</p>
<ul>
<li>gphys (GPhys) : a GPhys whose data is plotted.</li>
<li>newframe (true/false) : if true, calls <a href="#label:10">fig</a>, <a href="#label:13">axes</a>,
      <a href="#label:8">title</a>, and <a href="#label:9">annotate</a> internally; if false, only
      the poly-line is drawn (overlaid to the exiting figure).</li>
<li><p>options (Hash) : options to change the default behavior if specified.
      It is a Hash with option names (String) as keys and their values.
      Options are interpreted by a NumRu::Misc::KeywordOptAutoHelp,
      so you can shorten the keys (by omitting tails) as long as it is 
      unambiguous.</p>
<pre>option name   default value   # description:
"title"       nil     # Title of the figure(if nil, internally
                      # determined)
"annotate"    true    # if false, do not put texts on the right
                      # margin even when newframe==true
"exchange"    false   # whether to exchange x and y axes
"index"       1       # mark index
"type"        2       # mark type
"size"        0.01    # marks size
"help"        false   # show help message if true</pre></li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul></dd>
<dt><h4><a name="label:18" id="label:18"><code>contour(<var>gphys</var>, <var>newframe</var>=<var>true</var>, <var>options</var>=<var>nil</var>)</code></a></h4></dt><!-- RDLabel: "contour" -->
<dd>
<p>Contour plot by selecting the first 2 dimensions (with <a href="#label:5">first2D</a>)
if <code>gphys</code> is more than 3D.</p>
<p>Contour levels are determined as follows:</p>
<ul>
<li>contour levels are set in this method if not set by
      <!-- Reference, RDLabel "contour_levels" doesn't exist --><em class="label-not-found">contour_levels</em><!-- Reference end --> or the option <code>"levels"</code> is specified 
      explicitly.</li>
<li>When contour levels are set in this method, the option <code>"levels"</code> 
      has the highest precedence. If it is specified, options
      <code>"index"</code>, <code>"line_type"</code>, <code>"label"</code>, and <code>"label_height"</code>
      are used.
      If <code>"levels"</code> are not specified, contour levels with a linear
      increment are set by using the options <code>"min"</code>, <code>"max"</code>,
      <code>"nlev"</code>, <code>"interval"</code>, <code>"nozero"</code>, <code>"coloring"</code>, 
      <code>"clr_min"</code>, and <code>"clr_max"</code>, which are interpreted by
      DCLExt::<a href="#label:51">ud_set_linear_levs</a>. The default values 
      of the linear level setting can be changed with
      <a href="#label:21">set_linear_contour_options</a>.</li>
</ul>
<p>ARGUMENTS</p>
<ul>
<li>gphys (GPhys) : a GPhys whose data is plotted.</li>
<li>newframe (true/false) : if true, calls <a href="#label:10">fig</a>, <a href="#label:13">axes</a>,
      <a href="#label:8">title</a>, and <a href="#label:9">annotate</a> internally; if false, only
      the poly-line is drawn (overlaid to the exiting figure).</li>
<li><p>options (Hash) : options to change the default behavior if specified.
      It is a Hash with option names (String) as keys and their values.
      Options are interpreted by a NumRu::Misc::KeywordOptAutoHelp,
      so you can shorten the keys (by omitting tails) as long as it is 
      unambiguous.</p>
<pre>option name   default value   # description:
"title"       nil     # Title of the figure(if nil, internally
                      # determined)
"annotate"    true    # if false, do not put texts on the right
                      # margin even when newframe==true
"min"         nil     # minimum contour value
"max"         nil     # maximum contour value
"nlev"        nil     # number of levels
"interval"    nil     # contour interval
"nozero"      nil     # delete zero contour
"coloring"    false   # set color contours with ud_coloring
"clr_min"     13      # (if coloring) minimum color id
"clr_max"     100     # (if coloring) maximum color id
"help"        false   # show help message if true
"levels"      nil     # contour levels (Array/NArray of Numeric)
"index"       nil     # (if levels) line index(es) (Array/NArray of
                      # integers, Integer, or nil)
"line_type"   nil     # (if levels) line type(s) (Array/NArray of
                      # integers, Integer, or nil)
"label"       nil     # (if levels) contour label(s) (Array/NArray of
                      # String, String, true, false, nil). nil is
                      # recommended.
"label_height"  nil   # (if levels) label height(s) 
                      # (Array/NArray of Numeric, Numeric, or nil).
                      #  nil is recommended.</pre></li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul></dd>
<dt><h4><a name="label:19" id="label:19"><code>set_contour_levels(<var>options</var>)</code></a></h4></dt><!-- RDLabel: "set_contour_levels" -->
<dd>
<p>Set contour levels for <a href="#label:18">contour</a> explicitly by values with the option <code>levels</code>.</p>
<p>ARGUMENTS</p>
<ul>
<li>options (Hash) : options to change the default behavior.
      The option <code>"levels"</code> is mandatory (so it is not optional!).
      Supported options are <code>"levels"</code>, <code>"index"</code>, 
      <code>"line_type"</code>, <code>"label"</code>, and <code>"label_height"</code>.
      See <a href="#label:18">contour</a> for their description.</li>
</ul></dd>
<dt><h4><a name="label:20" id="label:20"><code>clear_contour_levels</code></a></h4></dt><!-- RDLabel: "clear_contour_levels" -->
<dd>
<p>Clear contour levels set by <a href="#label:19">set_contour_levels</a>.</p></dd>
<dt><h4><a name="label:21" id="label:21"><code>set_linear_contour_options(<var>options</var>)</code></a></h4></dt><!-- RDLabel: "set_linear_contour_options" -->
<dd>
<p>Change the default option values regarding linear contour level
setting in <a href="#label:18">contour</a>.</p>
<p>ARGUMENTS</p>
<ul>
<li>options (Hash) : The usage is the same as <code>options</code> 
      for <a href="#label:18">contour</a> but supported options here are limited to
      <code>"min"</code>, <code>"max"</code>, <code>"nlev"</code>, <code>"interval"</code>, 
      <code>"nozero"</code>, <code>"coloring"</code>, <code>"clr_min"</code>, and <code>"clr_max"</code>. </li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>a Hash containing the values replaced (the ones before calling this
      method)</li>
</ul></dd>
<dt><h4><a name="label:22" id="label:22"><code>next_linear_contour_options(<var>options</var>)</code></a></h4></dt><!-- RDLabel: "next_linear_contour_options" -->
<dd>
<p>Similar to <a href="#label:21">set_linear_contour_options</a> but the setting
is effective only for the next call of <a href="#label:18">contour</a>.</p></dd>
<dt><h4><a name="label:23" id="label:23"><code>tone(<var>gphys</var>, <var>newframe</var>=<var>true</var>, <var>options</var>=<var>nil</var>)</code></a></h4></dt><!-- RDLabel: "tone" -->
<dd>
<p>Color tone or shading by selecting the first 2 dimensions 
(with <a href="#label:5">first2D</a>) if <code>gphys</code> is more than 3D.</p>
<p>Tone levels are determined as follows:</p>
<ul>
<li>Tone levels are set in this method if not set by
      <a href="#label:24">set_tone_levels</a> or both the options two <code>"levels"</code> and
      <code>"patterns"</code> are specified explicitly.</li>
<li>When contour levels &amp; patterns are set in this method, 
<ul>
<li>The combination of <code>"levels"</code> and <code>"patterns"</code> 
         have the highest precedence. If they are specified,
         tone levels and patterns are determined by DCLExt::<a href="#label:57">ue_set_tone</a>.</li>
<li>If not, a linear tone levels are set if <code>"ltone"=true</code>
         (this is the default), or shading is made if <code>"ltone"=false</code>.
         Shading is determined by following the parameters in the UDPACK
         in DCL. Therefore, coloring is made if DCL.udpget('ltone')==true
         regardless the option <code>"ltone"=false</code> here.
         When linear levels are set in this method, options
         <code>"min"</code>, <code>"max"</code>, <code>"nlev"</code>, and <code>"interval"</code>
         are used if specified, which are interpreted by 
         DCLExt::<a href="#label:56">ue_set_linear_levs</a>. 
         Their default values can be changed by
         <a href="#label:26">set_linear_tone_options</a>.</li>
</ul></li>
</ul>
<p>ARGUMENTS</p>
<ul>
<li>gphys (GPhys) : a GPhys whose data is plotted.</li>
<li>newframe (true/false) : if true, calls <a href="#label:10">fig</a>, <a href="#label:13">axes</a>,
      <a href="#label:8">title</a>, and <a href="#label:9">annotate</a> internally; if false, only
      the poly-line is drawn (overlaid to the exiting figure).</li>
<li><p>options (Hash) : options to change the default behavior if specified.
      It is a Hash with option names (String) as keys and their values.
      Options are interpreted by a NumRu::Misc::KeywordOptAutoHelp,
      so you can shorten the keys (by omitting tails) as long as it is 
      unambiguous.</p>
<pre>option name   default value   # description:
"title"       nil     # Title of the figure(if nil, internally
                      # determined)
"annotate"    true    # if false, do not put texts on the right
                      # margin even when newframe==true
"ltone"       true    # Same as udpack parameter ltone
"min"         nil     # minimum contour value
"max"         nil     # maximum contour value
"nlev"        nil     # number of levels
"interval"    nil     # contour interval
"help"        false   # show help message if true
"levels"      nil     # tone levels  (Array/NArray of Numeric). Works
                      # together with patterns
"patterns"    nil     # tone patters (Array/NArray of Numeric). Works
                      # together with levels</pre></li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul></dd>
<dt><h4><a name="label:24" id="label:24"><code>set_tone_levels(<var>options</var>)</code></a></h4></dt><!-- RDLabel: "set_tone_levels" -->
<dd>
<p>Set tone levels for <a href="#label:23">tone</a> explicitly by values.</p>
<p>ARGUMENTS</p>
<ul>
<li>options (Hash) : options to change the default behavior.
      Supported options are <code>"levels"</code> and <code>"patterns"</code>.
      Both of them must be specified explicitly (so they are 
      not optional!).</li>
</ul></dd>
<dt><h4><a name="label:25" id="label:25"><code>clear_tone_levels</code></a></h4></dt><!-- RDLabel: "clear_tone_levels" -->
<dd>
<p>Clear tone levels set by <a href="#label:24">set_tone_levels</a>.</p></dd>
<dt><h4><a name="label:26" id="label:26"><code>set_linear_tone_options(<var>options</var>)</code></a></h4></dt><!-- RDLabel: "set_linear_tone_options" -->
<dd>
<p>Change the default option values regarding linear tone level
setting in <a href="#label:23">tone</a>.</p>
<p>ARGUMENTS</p>
<ul>
<li>options (Hash) : The usage is the same as <code>options</code> 
      for <a href="#label:23">tone</a> but supported options here are limited to
      <code>"min"</code>, <code>"max"</code>, <code>"nlev"</code>, and <code>"interval"</code>.</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>a Hash containing the values replaced (the ones before calling this
      method)</li>
</ul></dd>
<dt><h4><a name="label:27" id="label:27"><code>next_linear_tone_options(<var>options</var>)</code></a></h4></dt><!-- RDLabel: "next_linear_tone_options" -->
<dd>
<p>Similar to <a href="#label:26">set_linear_tone_options</a> but the setting
is effective only for the next call of <a href="#label:23">tone</a>.</p></dd>
</dl>
<h1><a name="label:28" id="label:28">module NumRu::DCLExt</a></h1><!-- RDLabel: "module NumRu::DCLExt" -->
<p>Collection of various compound DCL functions for convenience.
This module is to be separated but temporarily included in ggraph.rb
while it is premature.</p>
<h2><a name="label:29" id="label:29">Index</a></h2><!-- RDLabel: "Index" -->
<p>MATH1</p>
<ul>
<li><a href="#label:31">glpack</a></li>
</ul>
<p>GRPH1</p>
<ul>
<li><a href="#label:33">sgpack</a></li>
<li><a href="#label:35">slpack</a></li>
<li><a href="#label:37">swpack</a></li>
</ul>
<p>GRPH2</p>
<ul>
<li><a href="#label:39">uzpack</a></li>
<li><a href="#label:41">ulpack</a></li>
<li><a href="#label:43">ucpack</a></li>
<li><a href="#label:45">uupack</a></li>
<li><a href="#label:47">uspack</a></li>
<li><a href="#label:49">udpack</a></li>
<li><a href="#label:54">uepack</a></li>
<li><a href="#label:59">ugpack</a></li>
<li><a href="#label:61">umpack</a></li>
</ul>
<h2><a name="label:30" id="label:30">Module Functions</a></h2><!-- RDLabel: "Module Functions" -->
<h3><a name="label:31" id="label:31">glpack</a></h3><!-- RDLabel: "glpack" -->
<dl>
<dt><h4><a name="label:32" id="label:32"><code>gl_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "gl_set_params" -->
<dd>
<p>Calls <code>DCL.glpset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>ARGUMENTS</p>
<ul>
<li>hash (Hash) : combinations of parameter names and values for udpset</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>a Hash containing the parameter names and their old values that were 
      replaced.</li>
</ul>
<p>EXAMPLES</p>
<ul>
<li><p>You can modify parameters temporarily as follows.</p>
<pre>before = DCLExt.gl_set_params('lmiss'=&gt;true,'rmiss'=&gt;9999.0)
....
DCLExt.gl_set_params(before)     # reset the change</pre></li>
</ul></dd>
</dl>
<h3><a name="label:33" id="label:33">sgpack</a></h3><!-- RDLabel: "sgpack" -->
<dl>
<dt><h4><a name="label:34" id="label:34"><code>sg_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "sg_set_params" -->
<dd>
<p>Calls <code>DCL.sgpset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
</dl>
<h3><a name="label:35" id="label:35">slpack</a></h3><!-- RDLabel: "slpack" -->
<dl>
<dt><h4><a name="label:36" id="label:36"><code>sl_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "sl_set_params" -->
<dd>
<p>Calls <code>DCL.slpset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
</dl>
<h3><a name="label:37" id="label:37">swpack</a></h3><!-- RDLabel: "swpack" -->
<dl>
<dt><h4><a name="label:38" id="label:38"><code>sw_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "sw_set_params" -->
<dd>
<p>Calls <code>DCL.swpset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
</dl>
<h3><a name="label:39" id="label:39">uzpack</a></h3><!-- RDLabel: "uzpack" -->
<dl>
<dt><h4><a name="label:40" id="label:40"><code>uz_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "uz_set_params" -->
<dd>
<p>Calls <code>DCL.uzpset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
</dl>
<h3><a name="label:41" id="label:41">ulpack</a></h3><!-- RDLabel: "ulpack" -->
<dl>
<dt><h4><a name="label:42" id="label:42"><code>ul_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "ul_set_params" -->
<dd>
<p>Calls <code>DCL.ulpset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
</dl>
<h3><a name="label:43" id="label:43">ucpack</a></h3><!-- RDLabel: "ucpack" -->
<dl>
<dt><h4><a name="label:44" id="label:44"><code>uc_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "uc_set_params" -->
<dd>
<p>Calls <code>DCL.ucpset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
</dl>
<h3><a name="label:45" id="label:45">uupack</a></h3><!-- RDLabel: "uupack" -->
<dl>
<dt><h4><a name="label:46" id="label:46"><code>uu_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "uu_set_params" -->
<dd>
<p>Calls <code>DCL.uupset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
</dl>
<h3><a name="label:47" id="label:47">uspack</a></h3><!-- RDLabel: "uspack" -->
<dl>
<dt><h4><a name="label:48" id="label:48"><code>us_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "us_set_params" -->
<dd>
<p>Calls <code>DCL.uspset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
</dl>
<h3><a name="label:49" id="label:49">udpack</a></h3><!-- RDLabel: "udpack" -->
<dl>
<dt><h4><a name="label:50" id="label:50"><code>ud_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "ud_set_params" -->
<dd>
<p>Calls <code>DCL.udpset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>ARGUMENTS</p>
<ul>
<li>hash (Hash) : combinations of parameter names and values for udpset</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>a Hash containing the parameter names and their old values that were 
      replaced.</li>
</ul>
<p>EXAMPLES</p>
<ul>
<li><p>You can modify parameters temporarily as follows.</p>
<pre>before = DCLExt.ud_set_params('indxmj'=&gt;4,'lmsg'=&gt;false)
DCL.udcntz(data)
DCLExt.ud_set_params(before)     # reset the change</pre></li>
</ul></dd>
<dt><h4><a name="label:51" id="label:51"><code>ud_set_linear_levs(<var>v</var>, <var>options</var>)</code></a></h4></dt><!-- RDLabel: "ud_set_linear_levs" -->
<dd>
<p>Set contour levels with a constant interval</p>
<p>ARGUMENTS</p>
<ul>
<li>v : Data values to be fed to udcnt[rz]</li>
<li><p>options (Hash) : option specification by keys and values. Available
      options are </p>
<pre>name   default value   description
'min'      nil       minimum contour value (Numeric)
'max'      nil       maximum contour value (Numeric)
'nlev'     nil       number of levels (Integer)
'interval' nil       contour interval (Numeric)
'nozero'   nil       delete zero contour (true/false)
'coloring' false     set color contours with ud_coloring (true/false)
'clr_min'  13        (if coloring) minimum color id (Integer)
'clr_max'  100       (if coloring) maximum color id (Integer)</pre>
<p>Here, <code>interval</code> has a higher precedence over <code>nlev</code>.
Since all the default values are nil, only those explicitly specified
are interpreted. If no option is provided, the levels generated will
be the default ones set by udcnt[rz] without any level specification.</p></li>
</ul></dd>
<dt><h4><a name="label:52" id="label:52"><code>ud_set_contour(<var>levels</var>,<var>index</var>=<var>nil</var>,<var>line_type</var>=<var>nil</var>,<var>label</var>=<var>nil</var>,<var>label_height</var>=<var>nil</var>)</code></a></h4></dt><!-- RDLabel: "ud_set_contour" -->
<dd>
<p>Set contours of at specified levels.</p>
<p>Normally you do not have to specify <code>label</code> and <code>label_height</code>.</p>
<p>It calls DCL.udsclv for each level. So the arguments are basically
the same as DCL.udsclv, but only levels are mandatory here.</p>
<p>ARGUMENTS</p>
<ul>
<li>levels (Array, NArray, or Numeric) : contour levels to be set.
      If Numeric, a single level is set.</li>
<li>index (Array of integers, Integer, or nil) : 
      index(es) of the contours. If Array (or NArray), 
      the length must agree with that of <code>levels</code>.
      If it is a single Integer, all the contour will have the same index. </li>
</ul>
<pre>If nil, the value of 'indxmn' is used.</pre>
<ul>
<li>line_type (Array of integers, Integer, or nil) : 
      line type(s) of the contours. If Array (or NArray), 
      the length must agree with that of <code>levels</code>.
      If it is a single Integer, all the contour will have the same type. 
      If nil, set to be 1.</li>
<li>label (Array of String, String, true, false, nil) :
      Label(s) of the contours. If Array (or NArray), 
      the length must agree with that of <code>levels</code>.
      If  it is a single String, all the contour will have the same label. 
      If true, all the contours will have the labels representing the levels.
      If false, no label will be drawn (set to "").
      If nil, same as true for the contours whose index is equal to "INDXMJ",
      and same as false otherwise.</li>
<li>label_height (Array of Numeric, Numeric, or nil) :
      Heigh of Labels. Normally you do not have to use this.
      If Array (or NArray), 
      the length must agree with that of <code>levels</code>.
      If nil, the default value ("RSIZEL") is used for non-empty labels.
      If a single Numeric, the same value is used for all the contours.
      Note that it is recommended to not to use this parameter but
      use DCL.udpset('RZISEL'. label_height), since a positive value
      here always means to draw labels even when the label is empty.</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul></dd>
<dt><h4><a name="label:53" id="label:53"><code>ud_add_contour(<var>levels</var>,<var>index</var>=<var>nil</var>,<var>line_type</var>=<var>nil</var>,<var>label</var>=<var>nil</var>,<var>label_height</var>=<var>nil</var>)</code></a></h4></dt><!-- RDLabel: "ud_add_contour" -->
<dd>
<p>Same as <a href="#label:52">ud_set_contour</a>, but does not clear the contour levels that have
been set.</p></dd>
</dl>
<h3><a name="label:54" id="label:54">uepack</a></h3><!-- RDLabel: "uepack" -->
<dl>
<dt><h4><a name="label:55" id="label:55"><code>ue_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "ue_set_params" -->
<dd>
<p>Calls <code>DCL.uepset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
<dt><h4><a name="label:56" id="label:56"><code>ue_set_linear_levs(<var>v</var>, <var>options</var>)</code></a></h4></dt><!-- RDLabel: "ue_set_linear_levs" -->
<dd>
<p>Set tone levels with a constant interval</p>
<p>ARGUMENTS</p>
<ul>
<li>v : Data values to be fed to udcnt[rz]</li>
<li><p>options (Hash) : option specification by keys and values. Available
      options are </p>
<pre>name   default value   description
'min'      nil         minimum tone level (Numeric)
'max'      nil         maximum tone level (Numeric)
'nlev'     nil         number of levels (Integer)
'interval' nil         tone-level interval (Numeric)</pre>
<p>Here, <code>interval</code> has a higher precedence over <code>nlev</code>.
Since all the default values are nil, only those explicitly specified
are interpreted. If no option is provided, the levels generated will
be the default ones set by udcnt[rz] without any level specification.</p></li>
</ul></dd>
<dt><h4><a name="label:57" id="label:57"><code>ue_set_tone(<var>levels</var>, <var>patterns</var>)</code></a></h4></dt><!-- RDLabel: "ue_set_tone" -->
<dd>
<p>Set tone levels and patterns.</p>
<p>patterns are set between levels as follows:</p>
<pre>when (levels.length == patterns.length+1)

  levels[0]  |  levels[1]  |  levels[2]  ...  |  levels[-2]  |  levels[-1]
         patterns[0]   patterns[1]   ...  patterns[-2]   patterns[-1]

when (levels.length == patterns.length)

  levels[0]  |  levels[1]  |  levels[2]  ...  |  levels[-1]  |  +infty
         patterns[0]   patterns[1]   ...  patterns[-2]   patterns[-1]

when (levels.length == patterns.length-1)

  -infty  |  levels[0]  |  levels[1]  ...  |  levels[-1]  |  +infty
      patterns[0]   patterns[1]   ...  patterns[-2]   patterns[-1]

else
  error (exception raised)</pre>
<p>ARGUMENTS</p>
<ul>
<li>levels (Array or NArray of Numeric) : tone levels. Its length must be
      either 1 larger than, equal to, or 1 smaller than the length of patterns</li>
<li>patterns (Array or NArray of Numeric) : tone patterns</li>
</ul>
<p>RETURN VALUE</p>
<ul>
<li>nil</li>
</ul></dd>
<dt><h4><a name="label:58" id="label:58"><code>ue_add_tone(<var>levels</var>, <var>patterns</var>)</code></a></h4></dt><!-- RDLabel: "ue_add_tone" -->
<dd>
<p>Same as <a href="#label:57">ue_set_tone</a>, but does not clear the tone levels that have
been set.</p></dd>
</dl>
<h3><a name="label:59" id="label:59">ugpack</a></h3><!-- RDLabel: "ugpack" -->
<dl>
<dt><h4><a name="label:60" id="label:60"><code>ug_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "ug_set_params" -->
<dd>
<p>Calls <code>DCL.ugpset</code> multiple times (for each key and val of <code>hash</code>).
See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
</dl>
<h3><a name="label:61" id="label:61">umpack</a></h3><!-- RDLabel: "umpack" -->
<dl>
<dt><h4><a name="label:62" id="label:62"><code>um_set_params(<var>hash</var>)</code></a></h4></dt><!-- RDLabel: "um_set_params" -->
<dd>
<p>Calls <code>DCL.umpset</code> multiple times (for each key and val of <code>hash</code>).</p>
<p>See <a href="#label:32">gl_set_params</a> for usage.</p></dd>
</dl>

</body>
</html>
